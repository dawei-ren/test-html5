<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 引入自己创建的模块 -->
    <script src="../../static/js/module/mymodule.js"></script>
    <script>
        /*
        闭包

        如何产生闭包
            当一个嵌套的内部（子）函数引用了嵌套的外部（父）函数的变量（函数）时，就产生了闭包
        
        闭包到底时什么？
            - 使用chrome调试查看
            - 理解一：闭包是嵌套的内部函数（大多数人）
            - 理解二：包含被引用变量（函数）的对象（极少数人）
            - 注意：闭包存在于嵌套的内部函数中

        产生闭包的条件
            - 函数嵌套
            - 内部函数引用了外部函数的数据（变量/函数）
            - 必须要调用外部函数，但是没必要调用内部函数
        
        常见闭包
            - 将函数作为另一个函数的返回值
            - 将函数作为实参传递给另一个函数调用


        闭包的作用
            - 使用函数内部的变量再函数执行完之后，仍然存活再内存中（延长了局部变量的声明周期）
            - 让函数外部可以操作（读写）到函数内部的数据（变量）

        闭包的生命周期
            - 产生：在嵌套内部函数定义执行完时就产生了（不是在调用）
            - 死亡：在嵌套的内部函数成为垃圾对象时


        闭包的应用：
            定义js模块
                - 具有特定功能的js文件
                - 将所有的数据和功能都封装在一个函数内部（私有的）
                - 只向外暴露一个包含n个方法的对象或函数
                - 模块的使用者，只需要通过模块暴露的对象调用方法来实现对应的功能

        闭包的优缺点：
            缺点：
                - 函数执行完后，函数内部的局部变量没有释放，占用内存时间会边长
                - 容易造成内存泄漏

            解决：
                - 能不用闭包就不用
                - 及时释放


        


        问题：
            函数执行完毕后，函数的内部声明的局部变量是否还存在？
                - 一般是不存在，存在于闭包中的变量才可能存在
            再函数外部能直接访问函数内部的局部变量吗？
                - 不能，但是我们可以通过闭包让外部操作它
        
        */

        // 创建一个闭包
        // function f1(){
        //     var a = 2;
        //     function f2(){
        //         console.log(a)
        //     }
        // }

        // f1()

        // 将函数作为另一个函数的返回值
        function f3(){
            var a = 2
            function f4(){
                a++
                console.log(a)
            }

            return f4
        }

        var f = f3()  // 此时产生了一个闭包
        f()  // 3
        f() // 4

        // 将函数作为实参传递给另外一个函数调用

        // function showDelay(msg, time){
        //     // 延迟执行函数
        //     setTimeout(function(){
        //         alert(msg)
        //     }, time)
        // }

        // showDelay("123", 2000)


        // 使用自己创建的模块
        myModule.upperName()
        myModule.lowerName()




    </script>


</head>
<body>
    
</body>
</html>